{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kasha\\\\OneDrive\\\\Desktop\\\\CN Project 2\\\\thk-protocol-simulator\\\\client\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Stage, Layer, Line, Circle, Text, Rect } from 'react-konva';\nimport io from 'socket.io-client';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  var _clients$find, _clients$find2, _clients$find3, _clients$find4, _clients$find5;\n  const [socket, setSocket] = useState(null);\n  const [clients, setClients] = useState([]);\n  const [agents, setAgents] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const [packets, setPackets] = useState([]);\n  const [currentClient, setCurrentClient] = useState('');\n  const [inputMessage, setInputMessage] = useState('');\n  const [clientName, setClientName] = useState('');\n  const [isConnected, setIsConnected] = useState(false);\n  const [logs, setLogs] = useState([]);\n  const [manualClientName, setManualClientName] = useState('');\n  const [selectedClient, setSelectedClient] = useState('');\n  const [stats, setStats] = useState({});\n  const [showAdminPanel, setShowAdminPanel] = useState(false);\n  const stageRef = useRef();\n  const messagesEndRef = useRef();\n\n  // Load chat history from localStorage\n  useEffect(() => {\n    const savedMessages = localStorage.getItem('thk_chat_history');\n    console.log('ðŸ“‚ Loading chat history from storage:', savedMessages);\n    if (savedMessages) {\n      try {\n        const parsedMessages = JSON.parse(savedMessages);\n        console.log('ðŸ“¥ Parsed messages:', parsedMessages.length);\n        const messagesWithDates = parsedMessages.map(msg => ({\n          ...msg,\n          timestamp: new Date(msg.timestamp)\n        }));\n        setMessages(messagesWithDates);\n        addLog(`ðŸ’¾ Loaded ${messagesWithDates.length} messages from storage`);\n      } catch (error) {\n        console.error('âŒ Error loading chat history:', error);\n        addLog('âŒ Error loading chat history');\n      }\n    }\n  }, []);\n\n  // Save chat history to localStorage\n  useEffect(() => {\n    if (messages.length > 0) {\n      try {\n        localStorage.setItem('thk_chat_history', JSON.stringify(messages));\n        console.log('ðŸ’¾ Saved messages to storage:', messages.length);\n      } catch (error) {\n        console.error('âŒ Error saving chat history:', error);\n        addLog('âŒ Error saving chat history');\n      }\n    }\n  }, [messages]);\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages, selectedClient]);\n  const scrollToBottom = () => {\n    if (messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({\n        behavior: 'smooth'\n      });\n    }\n  };\n\n  // Add log function\n  const addLog = useCallback(message => {\n    const timestamp = new Date().toLocaleTimeString();\n    setLogs(prev => [{\n      timestamp,\n      message\n    }, ...prev.slice(0, 50)]);\n  }, []);\n\n  // Packet animation\n  const animatePacket = useCallback(packetData => {\n    const newPacket = {\n      id: packetData.id || Date.now(),\n      ...packetData,\n      progress: 0\n    };\n    setPackets(prev => [...prev, newPacket]);\n    addLog(`ðŸ“¦ ${packetData.type} packet from ${packetData.from} to ${packetData.to}`);\n    const interval = setInterval(() => {\n      setPackets(prev => prev.map(p => p.id === newPacket.id ? {\n        ...p,\n        progress: Math.min(p.progress + 0.02, 1)\n      } : p));\n    }, 50);\n    setTimeout(() => {\n      clearInterval(interval);\n      setPackets(prev => prev.filter(p => p.id !== newPacket.id));\n    }, 2000);\n  }, [addLog]);\n\n  // Socket connection useEffect\n  useEffect(() => {\n    const newSocket = io('http://localhost:5000', {\n      reconnection: true,\n      reconnectionDelay: 1000\n    });\n    setSocket(newSocket);\n    newSocket.on('connect', () => {\n      setIsConnected(true);\n      addLog('âœ… Connected to THK Protocol Server');\n    });\n    newSocket.on('disconnect', () => {\n      setIsConnected(false);\n      addLog('âš ï¸ Disconnected from server');\n    });\n    newSocket.on('initial_state', data => {\n      setClients(data.clients || []);\n      setAgents(data.agents || []);\n      setStats(data.stats || {});\n    });\n    newSocket.on('client_connected', data => {\n      addLog(`ðŸ‘¤ Client ${data.name} connected`);\n    });\n    newSocket.on('client_disconnected', data => {\n      addLog(`ðŸ”Œ Client ${data.name} disconnected`);\n    });\n\n    // Manual disconnection event\n    newSocket.on('client_disconnected_manual', data => {\n      addLog(`ðŸ”Œ ${data.name} manually disconnected using THK Protocol`);\n      setClients(prev => prev.map(client => client.id === data.clientId ? {\n        ...client,\n        status: 'disconnected'\n      } : client));\n    });\n\n    // NEW: Reconnection event\n    newSocket.on('client_reconnected', data => {\n      addLog(`ðŸ”— ${data.name} reconnected using THK Protocol`);\n      setClients(prev => prev.map(client => client.id === data.clientId ? {\n        ...client,\n        status: 'connected'\n      } : client));\n    });\n    newSocket.on('client_added', client => {\n      addLog(`âž• Manual client ${client.name} added`);\n    });\n    newSocket.on('client_removed', data => {\n      addLog(`âž– Client ${data.clientId} removed`);\n    });\n    newSocket.on('packet_animation', data => {\n      animatePacket(data);\n    });\n    newSocket.on('agent_response', data => {\n      const newMessage = {\n        type: 'agent',\n        clientId: data.clientId,\n        agent: data.agent,\n        message: data.message,\n        timestamp: new Date(data.timestamp)\n      };\n      setMessages(prev => {\n        const updatedMessages = [...prev, newMessage];\n        localStorage.setItem('thk_chat_history', JSON.stringify(updatedMessages));\n        return updatedMessages;\n      });\n      addLog(`ðŸ’¬ ${data.agent} agent responded`);\n    });\n    newSocket.on('client_registered', data => {\n      setCurrentClient(data.name);\n      setSelectedClient(data.clientId);\n      addLog(`ðŸ“ Registered as ${data.name}`);\n    });\n    newSocket.on('error', error => {\n      addLog(`âŒ Error: ${error.message}`);\n    });\n    return () => {\n      newSocket.disconnect();\n    };\n  }, [addLog, animatePacket]);\n  const registerClient = () => {\n    if (clientName && socket) {\n      socket.emit('register_client', {\n        name: clientName\n      });\n    }\n  };\n  const addManualClient = async () => {\n    if (!manualClientName.trim()) return;\n    try {\n      const response = await fetch('http://localhost:5000/api/clients', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          name: manualClientName.trim()\n        })\n      });\n      if (response.ok) {\n        setManualClientName('');\n        addLog(`âœ… Added manual client: ${manualClientName}`);\n      }\n    } catch (error) {\n      addLog(`âŒ Error adding client: ${error.message}`);\n    }\n  };\n  const removeClient = async clientId => {\n    try {\n      await fetch(`http://localhost:5000/api/clients/${clientId}`, {\n        method: 'DELETE'\n      });\n      addLog(`âž– Removed client ${clientId}`);\n    } catch (error) {\n      addLog(`âŒ Error removing client: ${error.message}`);\n    }\n  };\n\n  // Disconnect client using THK Protocol\n  const disconnectClient = clientId => {\n    if (socket && clientId) {\n      socket.emit('disconnect_client', {\n        clientId\n      });\n      addLog(`ðŸ”Œ Initiating THK disconnection protocol for client`);\n    }\n  };\n\n  // NEW: Reconnect client using THK Protocol\n  const reconnectClient = clientId => {\n    if (socket && clientId) {\n      socket.emit('reconnect_client', {\n        clientId\n      });\n      addLog(`ðŸ”— Initiating THK reconnection protocol for client`);\n    }\n  };\n  const sendMessage = () => {\n    if (!inputMessage.trim() || !selectedClient || !socket) return;\n    const client = clients.find(c => c.id === selectedClient);\n\n    // NEW: Check if client is connected\n    if (client && client.status !== 'connected') {\n      addLog('âŒ Client is offline. Please connect first.');\n      return;\n    }\n    const messageData = {\n      clientId: selectedClient,\n      message: inputMessage.trim()\n    };\n    socket.emit('send_message', messageData);\n    const newMessage = {\n      type: 'client',\n      clientId: selectedClient,\n      client: (client === null || client === void 0 ? void 0 : client.name) || 'Unknown',\n      message: inputMessage.trim(),\n      timestamp: new Date()\n    };\n    setMessages(prev => {\n      const updatedMessages = [...prev, newMessage];\n      localStorage.setItem('thk_chat_history', JSON.stringify(updatedMessages));\n      return updatedMessages;\n    });\n    setInputMessage('');\n    addLog(`ðŸ“¤ Sent: \"${inputMessage.trim().substring(0, 30)}...\"`);\n  };\n  const loadStats = async () => {\n    try {\n      const response = await fetch('http://localhost:5000/api/stats');\n      const data = await response.json();\n      setStats(data);\n      addLog('ðŸ“Š Stats updated');\n    } catch (error) {\n      addLog(`âŒ Error loading stats: ${error.message}`);\n    }\n  };\n\n  // Visualization functions\n  const getNodePosition = nodeId => {\n    const positions = {\n      router: {\n        x: 400,\n        y: 300\n      },\n      food: {\n        x: 650,\n        y: 150\n      },\n      travel: {\n        x: 650,\n        y: 300\n      },\n      realestate: {\n        x: 650,\n        y: 450\n      }\n    };\n    if (positions[nodeId]) return positions[nodeId];\n    const clientIndex = clients.findIndex(c => c.id === nodeId);\n    return {\n      x: 150,\n      y: 100 + clientIndex * 80\n    };\n  };\n  const getPacketColor = packetType => {\n    const colors = {\n      SYN: '#ff6b6b',\n      'SYN-ACK': '#4ecdc4',\n      ACK: '#45b7d1',\n      DATA_SEND: '#96ceb4',\n      DATA_RECEIVE: '#feca57',\n      FIN: '#ff4757',\n      'FIN-ACK': '#ffa502'\n    };\n    return colors[packetType] || '#ffffff';\n  };\n  const getClientColor = clientId => {\n    const client = clients.find(c => c.id === clientId);\n    if (client && client.status === 'disconnected') {\n      return '#666666';\n    }\n    const colors = ['#4ecdc4', '#ff6b6b', '#45b7d1', '#feca57', '#a8e6cf', '#ffd3b6'];\n    const index = clients.findIndex(c => c.id === clientId) % colors.length;\n    return colors[index];\n  };\n  const filteredMessages = messages.filter(msg => selectedClient ? msg.clientId === selectedClient : true);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\uD83D\\uDE80 THK Protocol Simulator\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"connection-status\",\n          children: [\"Status: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: isConnected ? 'connected' : 'disconnected',\n            children: isConnected ? 'Connected' : 'Disconnected'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"admin-toggle\",\n          onClick: () => setShowAdminPanel(!showAdminPanel),\n          children: showAdminPanel ? 'Hide Admin' : 'Show Admin'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"visualization-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Network Topology\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Stage, {\n          width: 800,\n          height: 600,\n          ref: stageRef,\n          children: /*#__PURE__*/_jsxDEV(Layer, {\n            children: [clients.map(client => /*#__PURE__*/_jsxDEV(Line, {\n              points: [getNodePosition(client.id).x, getNodePosition(client.id).y, getNodePosition('router').x, getNodePosition('router').y],\n              stroke: client.status === 'disconnected' ? '#666' : '#444',\n              strokeWidth: 2,\n              dash: [5, 5]\n            }, `conn-client-${client.id}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 17\n            }, this)), agents.map(agent => /*#__PURE__*/_jsxDEV(Line, {\n              points: [getNodePosition('router').x, getNodePosition('router').y, getNodePosition(agent).x, getNodePosition(agent).y],\n              stroke: \"#444\",\n              strokeWidth: 2,\n              dash: [5, 5]\n            }, `conn-agent-${agent}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 17\n            }, this)), clients.map(client => /*#__PURE__*/_jsxDEV(Circle, {\n              x: getNodePosition(client.id).x,\n              y: getNodePosition(client.id).y,\n              radius: 20,\n              fill: getClientColor(client.id),\n              stroke: selectedClient === client.id ? '#fff' : '#666',\n              strokeWidth: selectedClient === client.id ? 3 : 1,\n              onClick: () => setSelectedClient(client.id)\n            }, client.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 17\n            }, this)), /*#__PURE__*/_jsxDEV(Rect, {\n              x: getNodePosition('router').x - 30,\n              y: getNodePosition('router').y - 30,\n              width: 60,\n              height: 60,\n              fill: \"#45b7d1\",\n              stroke: \"#fff\",\n              strokeWidth: 2,\n              cornerRadius: 10\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 15\n            }, this), agents.map(agent => /*#__PURE__*/_jsxDEV(Rect, {\n              x: getNodePosition(agent).x - 25,\n              y: getNodePosition(agent).y - 25,\n              width: 50,\n              height: 50,\n              fill: \"#ff6b6b\",\n              stroke: \"#fff\",\n              strokeWidth: 2,\n              cornerRadius: 8\n            }, agent, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 17\n            }, this)), clients.map(client => /*#__PURE__*/_jsxDEV(Text, {\n              x: getNodePosition(client.id).x - 30,\n              y: getNodePosition(client.id).y + 30,\n              text: client.name + (client.status === 'disconnected' ? ' (Offline)' : ''),\n              fontSize: 12,\n              fill: \"#fff\"\n            }, `label-${client.id}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 17\n            }, this)), /*#__PURE__*/_jsxDEV(Text, {\n              x: getNodePosition('router').x - 20,\n              y: getNodePosition('router').y + 45,\n              text: \"ROUTER\",\n              fontSize: 14,\n              fill: \"#fff\",\n              fontStyle: \"bold\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 437,\n              columnNumber: 15\n            }, this), agents.map(agent => /*#__PURE__*/_jsxDEV(Text, {\n              x: getNodePosition(agent).x - 25,\n              y: getNodePosition(agent).y + 40,\n              text: agent.toUpperCase(),\n              fontSize: 12,\n              fill: \"#fff\",\n              fontStyle: \"bold\"\n            }, `label-${agent}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 17\n            }, this)), packets.map(packet => {\n              const fromPos = getNodePosition(packet.from);\n              const toPos = getNodePosition(packet.to);\n              const currentX = fromPos.x + (toPos.x - fromPos.x) * packet.progress;\n              const currentY = fromPos.y + (toPos.y - fromPos.y) * packet.progress;\n              return /*#__PURE__*/_jsxDEV(Circle, {\n                x: currentX,\n                y: currentY,\n                radius: 6,\n                fill: getPacketColor(packet.type),\n                stroke: \"#fff\",\n                strokeWidth: 1\n              }, packet.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 464,\n                columnNumber: 19\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"control-panel\",\n        children: [showAdminPanel && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"admin-panel\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Admin Controls\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"manual-client-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Add Manual Clients\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 484,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"manual-client-input\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Enter client name\",\n                value: manualClientName,\n                onChange: e => setManualClientName(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 486,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: addManualClient,\n                children: \"Add Client\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 490,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stats-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Statistics\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stats\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Total Clients: \", stats.totalClients || 0]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 496,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Active Connections: \", stats.activeConnections || 0]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 497,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Congestion Window: \", stats.congestionWindow || 1]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 498,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: loadStats,\n              children: \"Refresh Stats\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 500,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"client-management\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Client Management\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"client-registration\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Enter your name\",\n              value: clientName,\n              onChange: e => setClientName(e.target.value),\n              disabled: currentClient\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 508,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: registerClient,\n              disabled: !clientName || currentClient,\n              children: \"Register Client\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 513,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"client-list\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: [\"Active Clients (\", clients.length, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 520,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"client-buttons\",\n              children: clients.map(client => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"client-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: selectedClient === client.id ? 'selected' : '',\n                  onClick: () => setSelectedClient(client.id),\n                  style: {\n                    opacity: client.status === 'disconnected' ? 0.6 : 1\n                  },\n                  children: [client.name, \" (\", client.type, \") \", client.status === 'disconnected' ? 'ðŸ”Œ' : 'âœ…']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 524,\n                  columnNumber: 21\n                }, this), client.type === 'manual' && /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"remove-client\",\n                  onClick: () => removeClient(client.id),\n                  children: \"\\xD7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 534,\n                  columnNumber: 23\n                }, this), client.status !== 'disconnected' ? /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"disconnect-client\",\n                  onClick: () => disconnectClient(client.id),\n                  title: \"Disconnect using THK Protocol\",\n                  children: \"\\uD83D\\uDD0C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 542,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"reconnect-client\",\n                  onClick: () => reconnectClient(client.id),\n                  title: \"Reconnect using THK Protocol\",\n                  children: \"\\uD83D\\uDD17\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 550,\n                  columnNumber: 23\n                }, this)]\n              }, client.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 523,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 521,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 519,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-interface\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Chat with Agents \", selectedClient && ` - ${((_clients$find = clients.find(c => c.id === selectedClient)) === null || _clients$find === void 0 ? void 0 : _clients$find.name) || 'Unknown'}`, selectedClient && ((_clients$find2 = clients.find(c => c.id === selectedClient)) === null || _clients$find2 === void 0 ? void 0 : _clients$find2.status) === 'disconnected' && ' (Offline)']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 566,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"messages-container\",\n            children: [filteredMessages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `message ${msg.type}`,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-header\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: [msg.type === 'client' ? 'You' : `${msg.agent} Agent`, \":\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 574,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"timestamp\",\n                  children: msg.timestamp.toLocaleTimeString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 577,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 573,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-content\",\n                children: msg.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 581,\n                columnNumber: 19\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 572,\n              columnNumber: 17\n            }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: messagesEndRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 584,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 570,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-input\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: selectedClient && ((_clients$find3 = clients.find(c => c.id === selectedClient)) === null || _clients$find3 === void 0 ? void 0 : _clients$find3.status) === 'disconnected' ? \"Client is offline. Please connect first.\" : \"Type your message...\",\n              value: inputMessage,\n              onChange: e => setInputMessage(e.target.value),\n              onKeyPress: e => e.key === 'Enter' && sendMessage(),\n              disabled: !selectedClient || selectedClient && ((_clients$find4 = clients.find(c => c.id === selectedClient)) === null || _clients$find4 === void 0 ? void 0 : _clients$find4.status) === 'disconnected'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 587,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: sendMessage,\n              disabled: !inputMessage || !selectedClient || selectedClient && ((_clients$find5 = clients.find(c => c.id === selectedClient)) === null || _clients$find5 === void 0 ? void 0 : _clients$find5.status) === 'disconnected',\n              children: \"Send\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 597,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 586,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 565,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"logs-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Protocol Logs\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 608,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"logs\",\n          children: logs.map((log, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"log-entry\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"timestamp\",\n              children: [\"[\", log.timestamp, \"]\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 612,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"log-message\",\n              children: log.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 613,\n              columnNumber: 17\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 611,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 609,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 607,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 340,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"gKZBvYIVqCIBqUKCzCCNZZi6YRM=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","Stage","Layer","Line","Circle","Text","Rect","io","jsxDEV","_jsxDEV","App","_s","_clients$find","_clients$find2","_clients$find3","_clients$find4","_clients$find5","socket","setSocket","clients","setClients","agents","setAgents","messages","setMessages","packets","setPackets","currentClient","setCurrentClient","inputMessage","setInputMessage","clientName","setClientName","isConnected","setIsConnected","logs","setLogs","manualClientName","setManualClientName","selectedClient","setSelectedClient","stats","setStats","showAdminPanel","setShowAdminPanel","stageRef","messagesEndRef","savedMessages","localStorage","getItem","console","log","parsedMessages","JSON","parse","length","messagesWithDates","map","msg","timestamp","Date","addLog","error","setItem","stringify","scrollToBottom","current","scrollIntoView","behavior","message","toLocaleTimeString","prev","slice","animatePacket","packetData","newPacket","id","now","progress","type","from","to","interval","setInterval","p","Math","min","setTimeout","clearInterval","filter","newSocket","reconnection","reconnectionDelay","on","data","name","client","clientId","status","newMessage","agent","updatedMessages","disconnect","registerClient","emit","addManualClient","trim","response","fetch","method","headers","body","ok","removeClient","disconnectClient","reconnectClient","sendMessage","find","c","messageData","substring","loadStats","json","getNodePosition","nodeId","positions","router","x","y","food","travel","realestate","clientIndex","findIndex","getPacketColor","packetType","colors","SYN","ACK","DATA_SEND","DATA_RECEIVE","FIN","getClientColor","index","filteredMessages","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","width","height","ref","points","stroke","strokeWidth","dash","radius","fill","cornerRadius","text","fontSize","fontStyle","toUpperCase","packet","fromPos","toPos","currentX","currentY","placeholder","value","onChange","e","target","totalClients","activeConnections","congestionWindow","disabled","style","opacity","title","onKeyPress","key","_c","$RefreshReg$"],"sources":["C:/Users/kasha/OneDrive/Desktop/CN Project 2/thk-protocol-simulator/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { Stage, Layer, Line, Circle, Text, Rect } from 'react-konva';\r\nimport io from 'socket.io-client';\r\nimport './App.css';\r\n\r\nconst App = () => {\r\n  const [socket, setSocket] = useState(null);\r\n  const [clients, setClients] = useState([]);\r\n  const [agents, setAgents] = useState([]);\r\n  const [messages, setMessages] = useState([]);\r\n  const [packets, setPackets] = useState([]);\r\n  const [currentClient, setCurrentClient] = useState('');\r\n  const [inputMessage, setInputMessage] = useState('');\r\n  const [clientName, setClientName] = useState('');\r\n  const [isConnected, setIsConnected] = useState(false);\r\n  const [logs, setLogs] = useState([]);\r\n  const [manualClientName, setManualClientName] = useState('');\r\n  const [selectedClient, setSelectedClient] = useState('');\r\n  const [stats, setStats] = useState({});\r\n  const [showAdminPanel, setShowAdminPanel] = useState(false);\r\n  const stageRef = useRef();\r\n  const messagesEndRef = useRef();\r\n\r\n  // Load chat history from localStorage\r\n  useEffect(() => {\r\n    const savedMessages = localStorage.getItem('thk_chat_history');\r\n    console.log('ðŸ“‚ Loading chat history from storage:', savedMessages);\r\n    if (savedMessages) {\r\n      try {\r\n        const parsedMessages = JSON.parse(savedMessages);\r\n        console.log('ðŸ“¥ Parsed messages:', parsedMessages.length);\r\n        \r\n        const messagesWithDates = parsedMessages.map(msg => ({\r\n          ...msg,\r\n          timestamp: new Date(msg.timestamp)\r\n        }));\r\n        \r\n        setMessages(messagesWithDates);\r\n        addLog(`ðŸ’¾ Loaded ${messagesWithDates.length} messages from storage`);\r\n      } catch (error) {\r\n        console.error('âŒ Error loading chat history:', error);\r\n        addLog('âŒ Error loading chat history');\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // Save chat history to localStorage\r\n  useEffect(() => {\r\n    if (messages.length > 0) {\r\n      try {\r\n        localStorage.setItem('thk_chat_history', JSON.stringify(messages));\r\n        console.log('ðŸ’¾ Saved messages to storage:', messages.length);\r\n      } catch (error) {\r\n        console.error('âŒ Error saving chat history:', error);\r\n        addLog('âŒ Error saving chat history');\r\n      }\r\n    }\r\n  }, [messages]);\r\n\r\n  // Auto-scroll to bottom when new messages arrive\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages, selectedClient]);\r\n\r\n  const scrollToBottom = () => {\r\n    if (messagesEndRef.current) {\r\n      messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n  };\r\n\r\n  // Add log function\r\n  const addLog = useCallback((message) => {\r\n    const timestamp = new Date().toLocaleTimeString();\r\n    setLogs(prev => [{ timestamp, message }, ...prev.slice(0, 50)]);\r\n  }, []);\r\n\r\n  // Packet animation\r\n  const animatePacket = useCallback((packetData) => {\r\n    const newPacket = {\r\n      id: packetData.id || Date.now(),\r\n      ...packetData,\r\n      progress: 0\r\n    };\r\n    setPackets(prev => [...prev, newPacket]);\r\n    addLog(`ðŸ“¦ ${packetData.type} packet from ${packetData.from} to ${packetData.to}`);\r\n\r\n    const interval = setInterval(() => {\r\n      setPackets(prev =>\r\n        prev.map(p =>\r\n          p.id === newPacket.id\r\n            ? { ...p, progress: Math.min(p.progress + 0.02, 1) }\r\n            : p\r\n        )\r\n      );\r\n    }, 50);\r\n\r\n    setTimeout(() => {\r\n      clearInterval(interval);\r\n      setPackets(prev => prev.filter(p => p.id !== newPacket.id));\r\n    }, 2000);\r\n  }, [addLog]);\r\n\r\n  // Socket connection useEffect\r\n  useEffect(() => {\r\n    const newSocket = io('http://localhost:5000', {\r\n      reconnection: true,\r\n      reconnectionDelay: 1000,\r\n    });\r\n    setSocket(newSocket);\r\n\r\n    newSocket.on('connect', () => {\r\n      setIsConnected(true);\r\n      addLog('âœ… Connected to THK Protocol Server');\r\n    });\r\n\r\n    newSocket.on('disconnect', () => {\r\n      setIsConnected(false);\r\n      addLog('âš ï¸ Disconnected from server');\r\n    });\r\n\r\n    newSocket.on('initial_state', (data) => {\r\n      setClients(data.clients || []);\r\n      setAgents(data.agents || []);\r\n      setStats(data.stats || {});\r\n    });\r\n\r\n    newSocket.on('client_connected', (data) => {\r\n      addLog(`ðŸ‘¤ Client ${data.name} connected`);\r\n    });\r\n\r\n    newSocket.on('client_disconnected', (data) => {\r\n      addLog(`ðŸ”Œ Client ${data.name} disconnected`);\r\n    });\r\n\r\n    // Manual disconnection event\r\n    newSocket.on('client_disconnected_manual', (data) => {\r\n      addLog(`ðŸ”Œ ${data.name} manually disconnected using THK Protocol`);\r\n      setClients(prev => prev.map(client => \r\n        client.id === data.clientId \r\n          ? { ...client, status: 'disconnected' }\r\n          : client\r\n      ));\r\n    });\r\n\r\n    // NEW: Reconnection event\r\n    newSocket.on('client_reconnected', (data) => {\r\n      addLog(`ðŸ”— ${data.name} reconnected using THK Protocol`);\r\n      setClients(prev => prev.map(client => \r\n        client.id === data.clientId \r\n          ? { ...client, status: 'connected' }\r\n          : client\r\n      ));\r\n    });\r\n\r\n    newSocket.on('client_added', (client) => {\r\n      addLog(`âž• Manual client ${client.name} added`);\r\n    });\r\n\r\n    newSocket.on('client_removed', (data) => {\r\n      addLog(`âž– Client ${data.clientId} removed`);\r\n    });\r\n\r\n    newSocket.on('packet_animation', (data) => {\r\n      animatePacket(data);\r\n    });\r\n\r\n    newSocket.on('agent_response', (data) => {\r\n      const newMessage = {\r\n        type: 'agent',\r\n        clientId: data.clientId,\r\n        agent: data.agent,\r\n        message: data.message,\r\n        timestamp: new Date(data.timestamp)\r\n      };\r\n      \r\n      setMessages(prev => {\r\n        const updatedMessages = [...prev, newMessage];\r\n        localStorage.setItem('thk_chat_history', JSON.stringify(updatedMessages));\r\n        return updatedMessages;\r\n      });\r\n      \r\n      addLog(`ðŸ’¬ ${data.agent} agent responded`);\r\n    });\r\n\r\n    newSocket.on('client_registered', (data) => {\r\n      setCurrentClient(data.name);\r\n      setSelectedClient(data.clientId);\r\n      addLog(`ðŸ“ Registered as ${data.name}`);\r\n    });\r\n\r\n    newSocket.on('error', (error) => {\r\n      addLog(`âŒ Error: ${error.message}`);\r\n    });\r\n\r\n    return () => {\r\n      newSocket.disconnect();\r\n    };\r\n  }, [addLog, animatePacket]);\r\n\r\n  const registerClient = () => {\r\n    if (clientName && socket) {\r\n      socket.emit('register_client', { name: clientName });\r\n    }\r\n  };\r\n\r\n  const addManualClient = async () => {\r\n    if (!manualClientName.trim()) return;\r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/clients', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ name: manualClientName.trim() })\r\n      });\r\n      if (response.ok) {\r\n        setManualClientName('');\r\n        addLog(`âœ… Added manual client: ${manualClientName}`);\r\n      }\r\n    } catch (error) {\r\n      addLog(`âŒ Error adding client: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const removeClient = async (clientId) => {\r\n    try {\r\n      await fetch(`http://localhost:5000/api/clients/${clientId}`, {\r\n        method: 'DELETE'\r\n      });\r\n      addLog(`âž– Removed client ${clientId}`);\r\n    } catch (error) {\r\n      addLog(`âŒ Error removing client: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  // Disconnect client using THK Protocol\r\n  const disconnectClient = (clientId) => {\r\n    if (socket && clientId) {\r\n      socket.emit('disconnect_client', { clientId });\r\n      addLog(`ðŸ”Œ Initiating THK disconnection protocol for client`);\r\n    }\r\n  };\r\n\r\n  // NEW: Reconnect client using THK Protocol\r\n  const reconnectClient = (clientId) => {\r\n    if (socket && clientId) {\r\n      socket.emit('reconnect_client', { clientId });\r\n      addLog(`ðŸ”— Initiating THK reconnection protocol for client`);\r\n    }\r\n  };\r\n\r\n  const sendMessage = () => {\r\n    if (!inputMessage.trim() || !selectedClient || !socket) return;\r\n    \r\n    const client = clients.find(c => c.id === selectedClient);\r\n    \r\n    // NEW: Check if client is connected\r\n    if (client && client.status !== 'connected') {\r\n      addLog('âŒ Client is offline. Please connect first.');\r\n      return;\r\n    }\r\n    \r\n    const messageData = {\r\n      clientId: selectedClient,\r\n      message: inputMessage.trim()\r\n    };\r\n    \r\n    socket.emit('send_message', messageData);\r\n    \r\n    const newMessage = {\r\n      type: 'client',\r\n      clientId: selectedClient,\r\n      client: client?.name || 'Unknown',\r\n      message: inputMessage.trim(),\r\n      timestamp: new Date()\r\n    };\r\n    \r\n    setMessages(prev => {\r\n      const updatedMessages = [...prev, newMessage];\r\n      localStorage.setItem('thk_chat_history', JSON.stringify(updatedMessages));\r\n      return updatedMessages;\r\n    });\r\n    \r\n    setInputMessage('');\r\n    addLog(`ðŸ“¤ Sent: \"${inputMessage.trim().substring(0, 30)}...\"`);\r\n  };\r\n\r\n  const loadStats = async () => {\r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/stats');\r\n      const data = await response.json();\r\n      setStats(data);\r\n      addLog('ðŸ“Š Stats updated');\r\n    } catch (error) {\r\n      addLog(`âŒ Error loading stats: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  // Visualization functions\r\n  const getNodePosition = (nodeId) => {\r\n    const positions = {\r\n      router: { x: 400, y: 300 },\r\n      food: { x: 650, y: 150 },\r\n      travel: { x: 650, y: 300 },\r\n      realestate: { x: 650, y: 450 }\r\n    };\r\n    if (positions[nodeId]) return positions[nodeId];\r\n    \r\n    const clientIndex = clients.findIndex(c => c.id === nodeId);\r\n    return { x: 150, y: 100 + (clientIndex * 80) };\r\n  };\r\n\r\n  const getPacketColor = (packetType) => {\r\n    const colors = {\r\n      SYN: '#ff6b6b',\r\n      'SYN-ACK': '#4ecdc4',\r\n      ACK: '#45b7d1',\r\n      DATA_SEND: '#96ceb4',\r\n      DATA_RECEIVE: '#feca57',\r\n      FIN: '#ff4757',\r\n      'FIN-ACK': '#ffa502'\r\n    };\r\n    return colors[packetType] || '#ffffff';\r\n  };\r\n\r\n  const getClientColor = (clientId) => {\r\n    const client = clients.find(c => c.id === clientId);\r\n    if (client && client.status === 'disconnected') {\r\n      return '#666666';\r\n    }\r\n    \r\n    const colors = ['#4ecdc4', '#ff6b6b', '#45b7d1', '#feca57', '#a8e6cf', '#ffd3b6'];\r\n    const index = clients.findIndex(c => c.id === clientId) % colors.length;\r\n    return colors[index];\r\n  };\r\n\r\n  const filteredMessages = messages.filter(msg => \r\n    selectedClient ? msg.clientId === selectedClient : true\r\n  );\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <div className=\"header\">\r\n        <h1>ðŸš€ THK Protocol Simulator</h1>\r\n        <div className=\"header-controls\">\r\n          <div className=\"connection-status\">\r\n            Status: <span className={isConnected ? 'connected' : 'disconnected'}>\r\n              {isConnected ? 'Connected' : 'Disconnected'}\r\n            </span>\r\n          </div>\r\n          <button className=\"admin-toggle\" onClick={() => setShowAdminPanel(!showAdminPanel)}>\r\n            {showAdminPanel ? 'Hide Admin' : 'Show Admin'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"main-container\">\r\n        {/* Network Visualization */}\r\n        <div className=\"visualization-panel\">\r\n          <h3>Network Topology</h3>\r\n          <Stage width={800} height={600} ref={stageRef}>\r\n            <Layer>\r\n              {/* Connections */}\r\n              {clients.map(client => (\r\n                <Line key={`conn-client-${client.id}`}\r\n                  points={[\r\n                    getNodePosition(client.id).x,\r\n                    getNodePosition(client.id).y,\r\n                    getNodePosition('router').x,\r\n                    getNodePosition('router').y\r\n                  ]}\r\n                  stroke={client.status === 'disconnected' ? '#666' : '#444'}\r\n                  strokeWidth={2}\r\n                  dash={[5, 5]}\r\n                />\r\n              ))}\r\n              \r\n              {agents.map(agent => (\r\n                <Line key={`conn-agent-${agent}`}\r\n                  points={[\r\n                    getNodePosition('router').x,\r\n                    getNodePosition('router').y,\r\n                    getNodePosition(agent).x,\r\n                    getNodePosition(agent).y\r\n                  ]}\r\n                  stroke=\"#444\"\r\n                  strokeWidth={2}\r\n                  dash={[5, 5]}\r\n                />\r\n              ))}\r\n\r\n              {/* Nodes */}\r\n              {clients.map(client => (\r\n                <Circle key={client.id}\r\n                  x={getNodePosition(client.id).x}\r\n                  y={getNodePosition(client.id).y}\r\n                  radius={20}\r\n                  fill={getClientColor(client.id)}\r\n                  stroke={selectedClient === client.id ? '#fff' : '#666'}\r\n                  strokeWidth={selectedClient === client.id ? 3 : 1}\r\n                  onClick={() => setSelectedClient(client.id)}\r\n                />\r\n              ))}\r\n\r\n              <Rect x={getNodePosition('router').x - 30}\r\n                y={getNodePosition('router').y - 30}\r\n                width={60}\r\n                height={60}\r\n                fill=\"#45b7d1\"\r\n                stroke=\"#fff\"\r\n                strokeWidth={2}\r\n                cornerRadius={10}\r\n              />\r\n\r\n              {agents.map(agent => (\r\n                <Rect key={agent}\r\n                  x={getNodePosition(agent).x - 25}\r\n                  y={getNodePosition(agent).y - 25}\r\n                  width={50}\r\n                  height={50}\r\n                  fill=\"#ff6b6b\"\r\n                  stroke=\"#fff\"\r\n                  strokeWidth={2}\r\n                  cornerRadius={8}\r\n                />\r\n              ))}\r\n\r\n              {/* Labels */}\r\n              {clients.map(client => (\r\n                <Text key={`label-${client.id}`}\r\n                  x={getNodePosition(client.id).x - 30}\r\n                  y={getNodePosition(client.id).y + 30}\r\n                  text={client.name + (client.status === 'disconnected' ? ' (Offline)' : '')}\r\n                  fontSize={12}\r\n                  fill=\"#fff\"\r\n                />\r\n              ))}\r\n\r\n              <Text x={getNodePosition('router').x - 20}\r\n                y={getNodePosition('router').y + 45}\r\n                text=\"ROUTER\"\r\n                fontSize={14}\r\n                fill=\"#fff\"\r\n                fontStyle=\"bold\"\r\n              />\r\n\r\n              {agents.map(agent => (\r\n                <Text key={`label-${agent}`}\r\n                  x={getNodePosition(agent).x - 25}\r\n                  y={getNodePosition(agent).y + 40}\r\n                  text={agent.toUpperCase()}\r\n                  fontSize={12}\r\n                  fill=\"#fff\"\r\n                  fontStyle=\"bold\"\r\n                />\r\n              ))}\r\n\r\n              {/* Animated Packets */}\r\n              {packets.map(packet => {\r\n                const fromPos = getNodePosition(packet.from);\r\n                const toPos = getNodePosition(packet.to);\r\n                const currentX = fromPos.x + (toPos.x - fromPos.x) * packet.progress;\r\n                const currentY = fromPos.y + (toPos.y - fromPos.y) * packet.progress;\r\n                \r\n                return (\r\n                  <Circle key={packet.id}\r\n                    x={currentX}\r\n                    y={currentY}\r\n                    radius={6}\r\n                    fill={getPacketColor(packet.type)}\r\n                    stroke=\"#fff\"\r\n                    strokeWidth={1}\r\n                  />\r\n                );\r\n              })}\r\n            </Layer>\r\n          </Stage>\r\n        </div>\r\n\r\n        {/* Control Panel */}\r\n        <div className=\"control-panel\">\r\n          {showAdminPanel && (\r\n            <div className=\"admin-panel\">\r\n              <h3>Admin Controls</h3>\r\n              <div className=\"manual-client-section\">\r\n                <h4>Add Manual Clients</h4>\r\n                <div className=\"manual-client-input\">\r\n                  <input type=\"text\" placeholder=\"Enter client name\"\r\n                    value={manualClientName}\r\n                    onChange={(e) => setManualClientName(e.target.value)}\r\n                  />\r\n                  <button onClick={addManualClient}>Add Client</button>\r\n                </div>\r\n              </div>\r\n              <div className=\"stats-section\">\r\n                <h4>Statistics</h4>\r\n                <div className=\"stats\">\r\n                  <div>Total Clients: {stats.totalClients || 0}</div>\r\n                  <div>Active Connections: {stats.activeConnections || 0}</div>\r\n                  <div>Congestion Window: {stats.congestionWindow || 1}</div>\r\n                </div>\r\n                <button onClick={loadStats}>Refresh Stats</button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"client-management\">\r\n            <h3>Client Management</h3>\r\n            <div className=\"client-registration\">\r\n              <input type=\"text\" placeholder=\"Enter your name\"\r\n                value={clientName}\r\n                onChange={(e) => setClientName(e.target.value)}\r\n                disabled={currentClient}\r\n              />\r\n              <button onClick={registerClient}\r\n                disabled={!clientName || currentClient}\r\n              >\r\n                Register Client\r\n              </button>\r\n            </div>\r\n            <div className=\"client-list\">\r\n              <h4>Active Clients ({clients.length})</h4>\r\n              <div className=\"client-buttons\">\r\n                {clients.map(client => (\r\n                  <div key={client.id} className=\"client-item\">\r\n                    <button \r\n                      className={selectedClient === client.id ? 'selected' : ''}\r\n                      onClick={() => setSelectedClient(client.id)}\r\n                      style={{\r\n                        opacity: client.status === 'disconnected' ? 0.6 : 1\r\n                      }}\r\n                    >\r\n                      {client.name} ({client.type}) {client.status === 'disconnected' ? 'ðŸ”Œ' : 'âœ…'}\r\n                    </button>\r\n                    {client.type === 'manual' && (\r\n                      <button className=\"remove-client\"\r\n                        onClick={() => removeClient(client.id)}\r\n                      >\r\n                        Ã—\r\n                      </button>\r\n                    )}\r\n                    {/* Disconnect and Reconnect buttons */}\r\n                    {client.status !== 'disconnected' ? (\r\n                      <button \r\n                        className=\"disconnect-client\"\r\n                        onClick={() => disconnectClient(client.id)}\r\n                        title=\"Disconnect using THK Protocol\"\r\n                      >\r\n                        ðŸ”Œ\r\n                      </button>\r\n                    ) : (\r\n                      <button \r\n                        className=\"reconnect-client\"\r\n                        onClick={() => reconnectClient(client.id)}\r\n                        title=\"Reconnect using THK Protocol\"\r\n                      >\r\n                        ðŸ”—\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Chat interface */}\r\n          <div className=\"chat-interface\">\r\n            <h3>\r\n              Chat with Agents {selectedClient && ` - ${clients.find(c => c.id === selectedClient)?.name || 'Unknown'}`}\r\n              {selectedClient && clients.find(c => c.id === selectedClient)?.status === 'disconnected' && ' (Offline)'}\r\n            </h3>\r\n            <div className=\"messages-container\">\r\n              {filteredMessages.map((msg, index) => (\r\n                <div key={index} className={`message ${msg.type}`}>\r\n                  <div className=\"message-header\">\r\n                    <strong>\r\n                      {msg.type === 'client' ? 'You' : `${msg.agent} Agent`}:\r\n                    </strong>\r\n                    <span className=\"timestamp\">\r\n                      {msg.timestamp.toLocaleTimeString()}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"message-content\">{msg.message}</div>\r\n                </div>\r\n              ))}\r\n              <div ref={messagesEndRef} />\r\n            </div>\r\n            <div className=\"message-input\">\r\n              <input type=\"text\" placeholder={\r\n                selectedClient && clients.find(c => c.id === selectedClient)?.status === 'disconnected' \r\n                  ? \"Client is offline. Please connect first.\" \r\n                  : \"Type your message...\"\r\n              }\r\n                value={inputMessage}\r\n                onChange={(e) => setInputMessage(e.target.value)}\r\n                onKeyPress={(e) => e.key === 'Enter' && sendMessage()}\r\n                disabled={!selectedClient || (selectedClient && clients.find(c => c.id === selectedClient)?.status === 'disconnected')}\r\n              />\r\n              <button onClick={sendMessage}\r\n                disabled={!inputMessage || !selectedClient || (selectedClient && clients.find(c => c.id === selectedClient)?.status === 'disconnected')}\r\n              >\r\n                Send\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Logs Panel */}\r\n        <div className=\"logs-panel\">\r\n          <h3>Protocol Logs</h3>\r\n          <div className=\"logs\">\r\n            {logs.map((log, index) => (\r\n              <div key={index} className=\"log-entry\">\r\n                <span className=\"timestamp\">[{log.timestamp}]</span>\r\n                <span className=\"log-message\">{log.message}</span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}